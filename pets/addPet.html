<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add Pet</title>
    <link rel="stylesheet" href="../shared/cat.css" />
    <style>
      body {
        background: linear-gradient(
            rgba(255, 234, 246, 0.8),
            rgba(255, 234, 246, 0.8)
          ),
          url("images/catprint.jpg");
        background-repeat: repeat;
        background-size: auto;
        font-family: "Nunito", sans-serif;
        color: #6b4f4f;
        text-align: center;
        overflow-x: hidden;
      }

      header {
        text-align: center;
        padding: 15px 0;
        background: #ffb6d9;
        box-shadow: 0 4px 10px rgba(255, 105, 180, 0.25);
        border-bottom: 4px solid #ff8fc7;
      }

      header h1 {
        font-family: "Pacifico", cursive;
        color: #ffffff;
        margin: 0;
        font-size: 2em;
        text-shadow: 2px 2px #ff7cbc;
      }

      .button-row {
        margin-top: 10px;
      }

      .tile {
        background: #ffd8ec;
        color: #775c6b;
        text-decoration: none;
        padding: 10px 20px;
        border-radius: 20px;
        box-shadow: 0 5px 12px rgba(0, 0, 0, 0.12);
        font-weight: 700;
        transition: all 0.2s ease;
        cursor: pointer;
      }

      .tile:hover {
        background: #ffbde2;
        transform: translateY(-3px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.18);
      }

      .add-pet-container {
        background: #ffd8ec;
        padding: 30px 40px;
        border-radius: 20px;
        box-shadow: 0 5px 12px rgba(0, 0, 0, 0.12);
        width: 400px;
        margin: 50px auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
        font-family: "Nunito", sans-serif;
        color: #6b4f4f;
        align-items: center;
      }

      .add-pet-container h1 {
        font-family: "Pacifico", cursive;
        font-size: 1.8em;
        color: #775c6b;
        text-shadow: 1px 1px #ffe1f1;
      }

      label {
        font-weight: 600;
        margin-bottom: 5px;
        display: block;
        text-align: left;
      }

      input,
      textarea,
      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #d0e0f0;
        border-radius: 10px;
        font-size: 1em;
        box-sizing: border-box;
      }

      textarea {
        resize: vertical;
      }

      .buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 15px;
      }

      .buttons .tile {
        padding: 8px 20px;
        font-size: 0.9em;
        width: auto;
      }

      .pet-picture {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .pet-picture img {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid rgba(0, 0, 0, 0.1);
        background-color: rgba(173, 216, 230, 0.2);
        cursor: pointer;
      }

      .pet-picture input[type="file"] {
        display: none;
      }
    </style>
  </head>

  <body>
    <header>
      <div class="header-content">
        <img
          src="../images/catpic_left.png"
          alt="Cat Left"
          class="header-cat"
        />
        <h1>Add Pet</h1>
        <img
          src="../images/catpic_right.png"
          alt="Cat Right"
          class="header-cat"
        />
      </div>
      <div class="button-row">
        <a href="petDashboard.html" class="tile">BACK TO DASHBOARD</a>
      </div>
    </header>

    <div class="add-pet-container">
      <h1>New Pet</h1>

      <div class="pet-picture">
        <img
          id="petPic"
          src="https://placekitten.com/200/200"
          alt="Pet Picture"
        />
        <input type="file" id="petPicInput" accept="image/*" />
        <small>Click the image to upload</small>
      </div>

      <div class="form-group">
        <label for="pet-name">Pet Name</label>
        <input type="text" id="pet-name" placeholder="Enter pet name" />
      </div>

      <div class="form-group">
        <label for="pet-age">Age</label>
        <input
          type="number"
          id="pet-age"
          placeholder="Enter age in years"
          min="0"
        />
      </div>

      <div class="form-group">
        <label for="pet-weight">Weight (lbs)</label>
        <input
          type="number"
          id="pet-weight"
          placeholder="Enter weight"
          min="0"
        />
      </div>

      <div class="form-group">
        <label for="pet-medical">Medical Notes</label>
        <textarea id="pet-medical" placeholder="Enter medical notes"></textarea>
      </div>

      <div class="form-group">
        <label for="pet-gender">Gender</label>
        <select id="pet-gender">
          <option value="Unknown">Unknown</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>

      <div class="buttons">
        <button type="button" class="tile" onclick="submitPet()">Submit</button>
        <button type="button" class="tile" onclick="cancelPet()">Cancel</button>
      </div>
    </div>

    <script>
      const petPic = document.getElementById("petPic");
      const petPicInput = document.getElementById("petPicInput");

      petPic.addEventListener("click", () => petPicInput.click());

      petPicInput.addEventListener("change", function () {
        if (this.files && this.files[0]) {
          const reader = new FileReader();
          reader.onload = function (e) {
            petPic.src = e.target.result;
          };
          reader.readAsDataURL(this.files[0]);
        }
      });

      function cancelPet() {
        window.location.href = "petDashboard.html";
      }

      function submitPet() {
        const name = document.getElementById("pet-name").value.trim();
        const age = document.getElementById("pet-age").value.trim();
        const weight = document.getElementById("pet-weight").value.trim();
        const medical = document.getElementById("pet-medical").value.trim();
        const gender = document.getElementById("pet-gender").value;
        const photo = petPic.src;

        if (!name) {
          alert("Please enter a pet name!");
          return;
        }

        const newPet = { name, age, weight, medical, gender, photo };
        let pets = JSON.parse(localStorage.getItem("myPets")) || [];
        pets.push(newPet);
        localStorage.setItem("myPets", JSON.stringify(pets));

        window.location.href = "petDashboard.html";
      }
    </script>
  </body>
</html>
