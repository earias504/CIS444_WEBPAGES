<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forum Topic</title>
  <link rel="stylesheet" href="cat.css">
</head>
<body>
  <header>
    <h1 id="topicTitle">Forum Topic</h1>
    <div class="button-row">
      <button class="tile" onclick="location.href='forum.html'">BACK TO FORUM</button>
      <button class="tile" onclick="location.href='createPost.html'">CREATE POST</button>
    </div>
  </header>

  <main class="container">
    <div id="postList"></div>
  </main>

  <script>
    const topic = localStorage.getItem("currentTopic") || "Forum";
    document.getElementById("topicTitle").textContent = topic;

    const postList = document.getElementById("postList");
    const posts = JSON.parse(localStorage.getItem(topic)) || [];

    function renderPosts() {
      postList.innerHTML = "";
      if (posts.length === 0) {
        postList.innerHTML = "<p>No posts yet. Be the first to share something!</p>";
        return;
      }
      posts.forEach((post, i) => {
        const div = document.createElement("div");
        div.className = "cat-card";
        div.innerHTML = `
          <h3>${post.title}</h3>
          <p>${post.content}</p>
          ${post.image ? `<img src="${post.image}" alt="Post image" style="max-width:200px;border-radius:10px;">` : ""}
          <p><em>Posted by: ${post.author || "Anonymous"}</em></p>
          <button class="tile" onclick="deletePost(${i})">Delete</button>
          <hr>
        `;
        postList.appendChild(div);
      });
    }

    function deletePost(index) {
      if (confirm("Delete this post?")) {
        posts.splice(index, 1);
        localStorage.setItem(topic, JSON.stringify(posts));
        renderPosts();
      }
    }

    renderPosts();
  </script>
</body>
</html>
